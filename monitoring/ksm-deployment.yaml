apiVersion: apps/v1
kind: Deployment
metadata:
 name: kube-state-metrics
 namespace: ahmad-monitoring
spec:
 replicas: 1
 selector:
   matchLabels:
     app: kube-state-metrics
 template:
   metadata:
     labels:
       app: kube-state-metrics
   spec:
     serviceAccountName: kube-state-metrics
     containers:
       - name: kube-state-metrics
         image: registry.k8s.io/kube-state-metrics/kube-state-metrics:v2.12.0
         ports:
           - name: http-metrics
             containerPort: 8080
         readinessProbe:
           httpGet:
             path: /healthz
             port: 8080
           initialDelaySeconds: 5
           periodSeconds: 10
         livenessProbe:
           httpGet:
             path: /healthz
             port: 8080
           initialDelaySeconds: 15
           periodSeconds: 20
